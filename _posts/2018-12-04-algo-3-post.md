---
title: "[BOJ 11559] Puyo Puyo"
date: 2018-12-04
tags:
  - algorithm
---

 

# [BOJ 11559 Puyo Puyo](https://www.acmicpc.net/problem/11559)

```c++
#include <stdio.h>
#include <queue>
#include <utility>
using namespace std;

char map[13][7];
int visit[13][7];
int dx[] = {0, -1, 0, 1};
int dy[] = {-1, 0, 1, 0};
int ret = 0;

void setPuyo(){
    int i, j, cnt = 0;
    ret++;

    for(j = 0; j < 6; j++){
        cnt = 0;
        for(i = 11; i >= 0; i--){
            if(map[i][j] == '.')
                cnt++;
            if(map[i][j] != '.' && cnt != 0){
                map[i+cnt][j] = map[i][j];
                map[i][j] = '.';
            }
        }
    }
}

void bombPuyo(queue<pair<int, int>> q){
    int x, y;
    
    while(!q.empty()){
        x = q.front().first;
        y = q.front().second;
        
        map[x][y] = '.';
        q.pop();
    }
}

bool checkPuyo(int a, int b){
    queue<pair<int,int>> q;
    queue<pair<int,int>> q2;
    int i, j, x, y, ax, ay, cnt = 1;
    
    q.push(pair<int, int>(a, b));
    q2.push(pair<int, int>(a, b));
    visit[a][b] = 1;
    
    while(!q.empty()){
        x = q.front().first;
        y = q.front().second;
        q.pop();
        
        for(i = 0; i < 4; i++){
            ax = dx[i] + x;
            ay = dy[i] + y;
            
            if(ax >= 0 && ax < 12 && ay >= 0 && ay < 6 && map[ax][ay] == map[a][b] && visit[ax][ay] == 0){
                cnt++;
                q.push(pair<int, int>(ax, ay));
                q2.push(pair<int, int>(ax, ay));
                visit[ax][ay] = 1;
            }
        }

    }
    for(i = 0; i < 12; i++){
        for(j = 0; j < 6; j++)
            visit[i][j] = 0;
    }

    if(cnt >= 4){
        bombPuyo(q2);
        return true;
    }
    return false;
}


void selectPuyo(){
    int i, j;
    bool flag = false;
    
    for(i = 11; i >= 0; i--){
        for(j = 0; j < 6; j++){
            if(map[i][j] != '.'){
                if(checkPuyo(i, j))
                    flag = true;
            }
        }
    }
    
    if(flag){
        setPuyo();
        selectPuyo();
    }

}

int main(int argc, const char * argv[]) {
    int i;
    
    for(i = 0; i < 12; i++){
        scanf("%s", map[i]);
    }

    selectPuyo();
    
    printf("%d", ret);
    
    return 0;
}

```

